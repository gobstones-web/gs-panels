<link rel="import" href="../gs-panel-root.html">
<link rel="import" href="gs-panels-demo-item.html">
<link rel="import" href="gs-panels-demo-item-flex.html">
<link rel="import" href="../../../../iron-icon/iron-icon.html">
<link rel="import" href="../../../../iron-icons/iron-icons.html">
<link rel="import" href="../../../../iron-input/iron-input.html">
<link rel="import" href="../../../../paper-menu/paper-menu.html">
<link rel="import" href="../../../../paper-item/paper-item.html">
<link rel="import" href="../../../../paper-button/paper-button.html">
<link rel="import" href="../../../../paper-menu-button/paper-menu-button.html">
<link rel="import" href="../../../../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../../paper-checkbox/paper-checkbox.html">
<dom-module id="gs-panels-demo">
  <template>
    <style>
      :host .controls {
        margin: 20px;
      }
      :host .panels-wrapper {
        margin: 20px;
      }
      :host .panels-wrapper #gsPanels {
        min-height: 80px;
      }
      :host .left-block {
        height: 200px;
        width: 200px;
        background-color: green;
        float: left;
      }
      :host .class-options {
        margin-top: 5px;
        margin-bottom: 5px;
        padding: 0;
      }
      :host .class-options paper-button {
        padding-top: 3px;
        padding-bottom: 0px;
        margin: 0;
      }
      :host .class-options paper-button iron-icon {
        margin-top: -5px;
      }
      :host .class-options paper-item {
        cursor: pointer;
      }
      :host .class-options .iron-selected:focus:after,
      :host .class-options .iron-selected:focus:before {
        background-color: transparent;
        opacity: 0;
      }
      :host .class-options .red {
        color: white;
        background-color: #F20;
      }
      :host .class-options .red:hover {
        background-color: #F40;
      }
      :host .class-options .green {
        background-color: #0B0;
      }
      :host .class-options .green:hover {
        background-color: #0D0;
      }
      :host .class-options .blue {
        color: white;
        background-color: #04F;
      }
      :host .class-options .blue:hover {
        background-color: #06F;
      }

    </style>



    <div class="controls">
      <span>Container Width (0 = 100%): </span><br/>
      <input is="iron-input" bind-value="{{mainWidth}}" /><br/>
      <span>Container Height (0 = auto, current min-heigth = 20px): </span><br/>
      <input is="iron-input" bind-value="{{mainHeight}}" /><br/>
      <paper-checkbox checked="{{showLeftBlock}}">Show left block</paper-checkbox><br/>
      
      <paper-menu-button class="class-options">
        <paper-button class$="dropdown-trigger {{nextClass}}" raised>
          <iron-icon icon="check"></iron-icon>
          <span>{{nextClass}}</span>
        </paper-button>
        <paper-menu class="dropdown-content" selected="{{nextClassIndex}}">
          <template is="dom-repeat" items="{{classOptions}}">
            <paper-item class$="{{item}}">{{item}}</paper-item>
          </template>
        </paper-menu>
      </paper-menu-button>
      <paper-checkbox checked="{{changeClassAuto}}">Change Auto</paper-checkbox><br/>
      
      <span>name: </span>
      <input is="iron-input" bind-value="{{nextName}}" /><br/>
      <button id="panelSimple" >agregar panel simple</button>
      <button id="panelComplex" >agregar panel complejo</button>
    </div>

    <template is="dom-if" if="{{showLeftBlock}}">
      <div class="left-block"></div>
    </template>
    <div class="panels-wrapper">
      <gs-panel-root id="gsPanels" debug="true"></gs-panel-root>
    </div>
    <div class="under">Under panels page control</div>
  </template>
  <script>
    Polymer({
      is: 'gs-panels-demo',
      properties: {
        mainWidth: {
          type: Number,
          observer: '_main_width_change'
        },
        mainHeight: {
          type: Number,
          observer: '_main_height_change'
        },
        nextClass: {
          type: String
        },
        nextClassIndex: {
          type: Number,
          value: 0,
          observer: '_next_class_index_change'
        },
        changeClassAuto: {
          type: Boolean,
          value: true
        },
        classOptions: {
          type: Array,
          value: ['red', 'green', 'blue']
        },
        nextName: {
          type: String,
          value: 'Panel Name'
        }
      },
      listeners: {
        'panelSimple.tap': '_add_panel_simple',
        'panelComplex.tap': '_add_panel_complex'
      },
      ready: function() {
        var panels;
        this.nextClass = this.classOptions[this.nextClassIndex];
        return this.panels = panels = this.$.gsPanels;
      },
      _next_class_index_change: function() {
        return this.classOptions && (this.nextClass = this.classOptions[this.nextClassIndex]);
      },
      _change_class_index: function() {
        var nextClassIndex;
        if (this.changeClassAuto) {
          nextClassIndex = this.nextClassIndex + 1;
          if (nextClassIndex >= this.classOptions.length) {
            nextClassIndex = 0;
          }
          return this.nextClassIndex = nextClassIndex;
        }
      },
      _add_panel_simple: function() {
        var item;
        item = document.createElement('gs-panels-demo-item');
        item.elementClasses = this.nextClass;
        item.elementName = this.nextName;
        this.panels.add(item);
        return this._change_class_index();
      },
      _add_panel_complex: function() {
        var item;
        item = document.createElement('gs-panels-demo-item-flex');
        item.elementClasses = this.nextClass;
        item.elementName = this.nextName;
        this.panels.add(item);
        return this._change_class_index();
      },
      _is_numeric: function(value) {
        return !isNaN(value) && value !== '';
      },
      _main_width_change: function() {
        if (this._is_numeric(this.mainWidth)) {
          return this.panels && (this.panels.style.width = this.mainWidth + 'px');
        } else {
          return this.panels && (this.panels.style.width = '100%');
        }
      },
      _main_height_change: function() {
        if (this._is_numeric(this.mainHeight)) {
          return this.panels && (this.panels.style.height = this.mainHeight + 'px');
        } else {
          return this.panels && (this.panels.style.height = 'auto');
        }
      }
    });

  </script>
</dom-module>